{"version":3,"file":"panel-chat.js","names":["ChatRoom","options","classType","users","userCount","canConnect","pmTarget","challengeMenuOpen","challengingFormat","challengedFormat","updateTarget","connect","connected","PS","send","id","connectWhenLoggedIn","force","startsWith","slice","split","id1","id2","user","userid","toID","setUsers","title","handleMessage","line","spaceIndex","indexOf","cmd","target","roomid","test","join","leave","openChallenge","cancelChallenge","update","receiveLine","direct","count","usernames","username","addUser","removeUser","noUpdate","renameUser","oldUsername","destroy","PSRoom","ChatTextEntry","subscription","textbox","history","historyIndex","style","height","newHeight","Math","min","max","scrollHeight","focusIfNoSelection","e","tagName","selection","window","getSelection","type","elem","base","children","focus","keyDown","handleKey","props","onKey","preventDefault","stopImmediatePropagation","componentDidMount","subscribe","forceUpdate","componentWillUnmount","unsubscribe","submit","onMessage","value","historyPush","historyUp","historyDown","length","duplicateIndex","lastIndexOf","splice","push","cmdKey","metaKey","ctrlKey","altKey","shiftKey","keyCode","toggleFormatChar","formatChar","setSelectionRange","start","selectionStart","end","selectionEnd","charAt","wrap","substr","nesting","render","left","color","BattleLog","usernameColor","name","room","resize","width","padding","focusPreview","preact","Component","ChatPanel","text","chatLog","getElementsByClassName","scrollTop","offsetHeight","makeChallenge","format","team","packedTeam","Error","acceptChallenge","querySelector","tinyLayout","challengeTo","challengeFrom","PSRoomPanel","ChatUserList","state","expanded","toggleExpanded","setState","msg","userList","Object","entries","PSUtils","sortBy","server","getGroup","order","endsWith","minimized","map","groupSymbol","group","groups","includes","ChatLog","log","noSubscription","tokens","parseInt","shift","add","setControlsJSX","shouldComponentUpdate","className","top","updateScroll","jsx","controlsElem","undefined","document","createElement","appendChild","battle","scene","onClick","roomTypes","Model","updateRoomTypes"],"sources":["../src/panel-chat.tsx"],"sourcesContent":["/**\n * Chat panel\n *\n * @author Guangcong Luo <guangcongluo@gmail.com>\n * @license AGPLv3\n */\n\nclass ChatRoom extends PSRoom {\n\treadonly classType: 'chat' | 'battle' = 'chat';\n\tusers: {[userid: string]: string} = {};\n\tuserCount = 0;\n\treadonly canConnect = true;\n\n\t// PM-only properties\n\tpmTarget: string | null = null;\n\tchallengeMenuOpen = false;\n\tchallengingFormat: string | null = null;\n\tchallengedFormat: string | null = null;\n\n\tconstructor(options: RoomOptions) {\n\t\tsuper(options);\n\t\tif (options.pmTarget) this.pmTarget = options.pmTarget as string;\n\t\tif (options.challengeMenuOpen) this.challengeMenuOpen = true;\n\t\tthis.updateTarget(true);\n\t\tthis.connect();\n\t}\n\tconnect() {\n\t\tif (!this.connected) {\n\t\t\tif (!this.pmTarget) PS.send(`|/join ${this.id}`);\n\t\t\tthis.connected = true;\n\t\t\tthis.connectWhenLoggedIn = false;\n\t\t}\n\t}\n\tupdateTarget(force?: boolean) {\n\t\tif (this.id.startsWith('pm-')) {\n\t\t\tconst [id1, id2] = this.id.slice(3).split('-');\n\t\t\tif (id1 === PS.user.userid && toID(this.pmTarget) !== id2) {\n\t\t\t\tthis.pmTarget = id2;\n\t\t\t} else if (id2 === PS.user.userid && toID(this.pmTarget) !== id1) {\n\t\t\t\tthis.pmTarget = id1;\n\t\t\t} else if (!force) {\n\t\t\t\treturn;\n\t\t\t} else {\n\t\t\t\tthis.pmTarget = id1;\n\t\t\t}\n\t\t\tif (!this.userCount) {\n\t\t\t\tthis.setUsers(2, [` ${id1}`, ` ${id2}`]);\n\t\t\t}\n\t\t\tthis.title = `[PM] ${this.pmTarget}`;\n\t\t}\n\t}\n\t/**\n\t * @return true to prevent line from being sent to server\n\t */\n\thandleMessage(line: string) {\n\t\tif (!line.startsWith('/') || line.startsWith('//')) return false;\n\t\tconst spaceIndex = line.indexOf(' ');\n\t\tconst cmd = spaceIndex >= 0 ? line.slice(1, spaceIndex) : line.slice(1);\n\t\tconst target = spaceIndex >= 0 ? line.slice(spaceIndex + 1) : '';\n\t\tswitch (cmd) {\n\t\tcase 'j': case 'join': {\n\t\t\tconst roomid = /[^a-z0-9-]/.test(target) ? toID(target) as any as RoomID : target as RoomID;\n\t\t\tPS.join(roomid);\n\t\t\treturn true;\n\t\t} case 'part': case 'leave': {\n\t\t\tconst roomid = /[^a-z0-9-]/.test(target) ? toID(target) as any as RoomID : target as RoomID;\n\t\t\tPS.leave(roomid || this.id);\n\t\t\treturn true;\n\t\t} case 'chall': case 'challenge': {\n\t\t\tif (target) {\n\t\t\t\tPS.join(`challenge-${toID(target)}` as RoomID);\n\t\t\t\treturn true;\n\t\t\t}\n\t\t\tthis.openChallenge();\n\t\t\treturn true;\n\t\t} case 'cchall': case 'cancelchallenge': {\n\t\t\tthis.cancelChallenge();\n\t\t\treturn true;\n\t\t} case 'reject': {\n\t\t\tthis.challengedFormat = null;\n\t\t\tthis.update(null);\n\t\t\treturn false;\n\t\t}}\n\t\treturn super.handleMessage(line);\n\t}\n\topenChallenge() {\n\t\tif (!this.pmTarget) {\n\t\t\tthis.receiveLine([`error`, `Can only be used in a PM.`]);\n\t\t\treturn;\n\t\t}\n\t\tthis.challengeMenuOpen = true;\n\t\tthis.update(null);\n\t}\n\tcancelChallenge() {\n\t\tif (!this.pmTarget) {\n\t\t\tthis.receiveLine([`error`, `Can only be used in a PM.`]);\n\t\t\treturn;\n\t\t}\n\t\tif (this.challengingFormat) {\n\t\t\tthis.send('/cancelchallenge', true);\n\t\t\tthis.challengingFormat = null;\n\t\t\tthis.challengeMenuOpen = true;\n\t\t} else {\n\t\t\tthis.challengeMenuOpen = false;\n\t\t}\n\t\tthis.update(null);\n\t}\n\tsend(line: string, direct?: boolean) {\n\t\tthis.updateTarget();\n\t\tif (!direct && !line) return;\n\t\tif (!direct && this.handleMessage(line)) return;\n\t\tif (this.pmTarget) {\n\t\t\tPS.send(`|/pm ${this.pmTarget}, ${line}`);\n\t\t\treturn;\n\t\t}\n\t\tsuper.send(line, true);\n\t}\n\tsetUsers(count: number, usernames: string[]) {\n\t\tthis.userCount = count;\n\t\tthis.users = {};\n\t\tfor (const username of usernames) {\n\t\t\tconst userid = toID(username);\n\t\t\tthis.users[userid] = username;\n\t\t}\n\t\tthis.update(null);\n\t}\n\taddUser(username: string) {\n\t\tconst userid = toID(username);\n\t\tif (!(userid in this.users)) this.userCount++;\n\t\tthis.users[userid] = username;\n\t\tthis.update(null);\n\t}\n\tremoveUser(username: string, noUpdate?: boolean) {\n\t\tconst userid = toID(username);\n\t\tif (userid in this.users) {\n\t\t\tthis.userCount--;\n\t\t\tdelete this.users[userid];\n\t\t}\n\t\tif (!noUpdate) this.update(null);\n\t}\n\trenameUser(username: string, oldUsername: string) {\n\t\tthis.removeUser(oldUsername, true);\n\t\tthis.addUser(username);\n\t\tthis.update(null);\n\t}\n\tdestroy() {\n\t\tif (this.pmTarget) this.connected = false;\n\t\tsuper.destroy();\n\t}\n}\n\nclass ChatTextEntry extends preact.Component<{\n\troom: PSRoom, onMessage: (msg: string) => void, onKey: (e: KeyboardEvent) => boolean,\n\tleft?: number,\n}> {\n\tsubscription: PSSubscription | null = null;\n\ttextbox: HTMLTextAreaElement = null!;\n\thistory: string[] = [];\n\thistoryIndex = 0;\n\tcomponentDidMount() {\n\t\tthis.subscription = PS.user.subscribe(() => {\n\t\t\tthis.forceUpdate();\n\t\t});\n\t\tthis.textbox = this.base!.children[0].children[1] as HTMLTextAreaElement;\n\t\tif (this.base) this.update();\n\t}\n\tcomponentWillUnmount() {\n\t\tif (this.subscription) {\n\t\t\tthis.subscription.unsubscribe();\n\t\t\tthis.subscription = null;\n\t\t}\n\t}\n\tupdate = () => {\n\t\tconst textbox = this.textbox;\n\t\ttextbox.style.height = `12px`;\n\t\tconst newHeight = Math.min(Math.max(textbox.scrollHeight - 2, 16), 600);\n\t\ttextbox.style.height = `${newHeight}px`;\n\t};\n\tfocusIfNoSelection = (e: Event) => {\n\t\tif ((e.target as HTMLElement).tagName === 'TEXTAREA') return;\n\t\tconst selection = window.getSelection()!;\n\t\tif (selection.type === 'Range') return;\n\t\tconst elem = this.base!.children[0].children[1] as HTMLTextAreaElement;\n\t\telem.focus();\n\t};\n\tsubmit() {\n\t\tthis.props.onMessage(this.textbox.value);\n\t\tthis.historyPush(this.textbox.value);\n\t\tthis.textbox.value = '';\n\t\tthis.update();\n\t\treturn true;\n\t}\n\tkeyDown = (e: KeyboardEvent) => {\n\t\tif (this.handleKey(e) || this.props.onKey(e)) {\n\t\t\te.preventDefault();\n\t\t\te.stopImmediatePropagation();\n\t\t}\n\t};\n\thistoryUp() {\n\t\tif (this.historyIndex === 0) return false;\n\t\tconst line = this.textbox.value;\n\t\tif (line !== '') this.history[this.historyIndex] = line;\n\t\tthis.textbox.value = this.history[--this.historyIndex];\n\t\treturn true;\n\t}\n\thistoryDown() {\n\t\tconst line = this.textbox.value;\n\t\tif (line !== '') this.history[this.historyIndex] = line;\n\t\tif (this.historyIndex === this.history.length) {\n\t\t\tif (!line) return false;\n\t\t\tthis.textbox.value = '';\n\t\t} else if (++this.historyIndex === this.history.length) {\n\t\t\tthis.textbox.value = '';\n\t\t} else {\n\t\t\tthis.textbox.value = this.history[this.historyIndex];\n\t\t}\n\t\treturn true;\n\t}\n\thistoryPush(line: string) {\n\t\tconst duplicateIndex = this.history.lastIndexOf(line);\n\t\tif (duplicateIndex >= 0) this.history.splice(duplicateIndex, 1);\n\t\tif (this.history.length > 100) this.history.splice(0, 20);\n\t\tthis.history.push(line);\n\t\tthis.historyIndex = this.history.length;\n\t}\n\thandleKey(e: KeyboardEvent) {\n\t\tconst cmdKey = ((e.metaKey ? 1 : 0) + (e.ctrlKey ? 1 : 0) === 1) && !e.altKey && !e.shiftKey;\n\t\tif (e.keyCode === 13 && !e.shiftKey) { // Enter key\n\t\t\treturn this.submit();\n\t\t} else if (e.keyCode === 73 && cmdKey) { // Ctrl + I key\n\t\t\treturn this.toggleFormatChar('_');\n\t\t} else if (e.keyCode === 66 && cmdKey) { // Ctrl + B key\n\t\t\treturn this.toggleFormatChar('*');\n\t\t} else if (e.keyCode === 192 && cmdKey) { // Ctrl + ` key\n\t\t\treturn this.toggleFormatChar('`');\n\t\t// } else if (e.keyCode === 9 && !e.ctrlKey) { // Tab key\n\t\t// \tconst reverse = !!e.shiftKey; // Shift+Tab reverses direction\n\t\t// \treturn this.handleTabComplete(this.$chatbox, reverse);\n\t\t} else if (e.keyCode === 38 && !e.shiftKey && !e.altKey) { // Up key\n\t\t\treturn this.historyUp();\n\t\t} else if (e.keyCode === 40 && !e.shiftKey && !e.altKey) { // Down key\n\t\t\treturn this.historyDown();\n\t\t// } else if (app.user.lastPM && (textbox.value === '/reply' || textbox.value === '/r' || textbox.value === '/R') && e.keyCode === 32) { // '/reply ' is being written\n\t\t// \tvar val = '/pm ' + app.user.lastPM + ', ';\n\t\t// \ttextbox.value = val;\n\t\t// \ttextbox.setSelectionRange(val.length, val.length);\n\t\t// \treturn true;\n\t\t}\n\t\treturn false;\n\t}\n\ttoggleFormatChar(formatChar: string) {\n\t\tconst textbox = this.textbox;\n\t\tif (!textbox.setSelectionRange) return false;\n\n\t\tlet value = textbox.value;\n\t\tlet start = textbox.selectionStart;\n\t\tlet end = textbox.selectionEnd;\n\n\t\t// make sure start and end aren't midway through the syntax\n\t\tif (value.charAt(start) === formatChar && value.charAt(start - 1) === formatChar &&\n\t\t\tvalue.charAt(start - 2) !== formatChar) {\n\t\t\tstart++;\n\t\t}\n\t\tif (value.charAt(end) === formatChar && value.charAt(end - 1) === formatChar &&\n\t\t\tvalue.charAt(end - 2) !== formatChar) {\n\t\t\tend--;\n\t\t}\n\n\t\t// wrap in doubled format char\n\t\tconst wrap = formatChar + formatChar;\n\t\tvalue = value.substr(0, start) + wrap + value.substr(start, end - start) + wrap + value.substr(end);\n\t\tstart += 2;\n\t\tend += 2;\n\n\t\t// prevent nesting\n\t\tconst nesting = wrap + wrap;\n\t\tif (value.substr(start - 4, 4) === nesting) {\n\t\t\tvalue = value.substr(0, start - 4) + value.substr(start);\n\t\t\tstart -= 4;\n\t\t\tend -= 4;\n\t\t} else if (start !== end && value.substr(start - 2, 4) === nesting) {\n\t\t\tvalue = value.substr(0, start - 2) + value.substr(start + 2);\n\t\t\tstart -= 2;\n\t\t\tend -= 4;\n\t\t}\n\t\tif (value.substr(end, 4) === nesting) {\n\t\t\tvalue = value.substr(0, end) + value.substr(end + 4);\n\t\t} else if (start !== end && value.substr(end - 2, 4) === nesting) {\n\t\t\tvalue = value.substr(0, end - 2) + value.substr(end + 2);\n\t\t\tend -= 2;\n\t\t}\n\n\t\ttextbox.value = value;\n\t\ttextbox.setSelectionRange(start, end);\n\t\treturn true;\n\t}\n\trender() {\n\t\treturn <div\n\t\t\tclass=\"chat-log-add hasuserlist\" onClick={this.focusIfNoSelection} style={{left: this.props.left || 0}}\n\t\t>\n\t\t\t<form class=\"chatbox\">\n\t\t\t\t<label style={{color: BattleLog.usernameColor(PS.user.userid)}}>{PS.user.name}:</label>\n\t\t\t\t<textarea\n\t\t\t\t\tclass={this.props.room.connected ? 'textbox' : 'textbox disabled'}\n\t\t\t\t\tautofocus\n\t\t\t\t\trows={1}\n\t\t\t\t\tonInput={this.update}\n\t\t\t\t\tonKeyDown={this.keyDown}\n\t\t\t\t\tstyle={{resize: 'none', width: '100%', height: '16px', padding: '2px 3px 1px 3px'}}\n\t\t\t\t\tplaceholder={PS.focusPreview(this.props.room)}\n\t\t\t\t/>\n\t\t\t</form>\n\t\t</div>;\n\t}\n}\n\nclass ChatPanel extends PSRoomPanel<ChatRoom> {\n\tsend = (text: string) => {\n\t\tthis.props.room.send(text);\n\t};\n\tfocus() {\n\t\tthis.base!.querySelector('textarea')!.focus();\n\t}\n\tfocusIfNoSelection = () => {\n\t\tconst selection = window.getSelection()!;\n\t\tif (selection.type === 'Range') return;\n\t\tthis.focus();\n\t};\n\tonKey = (e: KeyboardEvent) => {\n\t\tif (e.keyCode === 33) { // Pg Up key\n\t\t\tconst chatLog = this.base!.getElementsByClassName('chat-log')[0] as HTMLDivElement;\n\t\t\tchatLog.scrollTop = chatLog.scrollTop - chatLog.offsetHeight + 60;\n\t\t\treturn true;\n\t\t} else if (e.keyCode === 34) { // Pg Dn key\n\t\t\tconst chatLog = this.base!.getElementsByClassName('chat-log')[0] as HTMLDivElement;\n\t\t\tchatLog.scrollTop = chatLog.scrollTop + chatLog.offsetHeight - 60;\n\t\t\treturn true;\n\t\t}\n\t\treturn false;\n\t};\n\tmakeChallenge = (e: Event, format: string, team?: Team) => {\n\t\tconst room = this.props.room;\n\t\tconst packedTeam = team ? team.packedTeam : '';\n\t\tif (!room.pmTarget) throw new Error(\"Not a PM room\");\n\t\tPS.send(`|/utm ${packedTeam}`);\n\t\tPS.send(`|/challenge ${room.pmTarget}, ${format}`);\n\t\troom.challengeMenuOpen = false;\n\t\troom.challengingFormat = format;\n\t\troom.update(null);\n\t};\n\tacceptChallenge = (e: Event, format: string, team?: Team) => {\n\t\tconst room = this.props.room;\n\t\tconst packedTeam = team ? team.packedTeam : '';\n\t\tif (!room.pmTarget) throw new Error(\"Not a PM room\");\n\t\tPS.send(`|/utm ${packedTeam}`);\n\t\tthis.props.room.send(`/accept`);\n\t\troom.challengedFormat = null;\n\t\troom.update(null);\n\t};\n\trender() {\n\t\tconst room = this.props.room;\n\t\tconst tinyLayout = room.width < 450;\n\n\t\tconst challengeTo = room.challengingFormat ? <div class=\"challenge\">\n\t\t\t<TeamForm format={room.challengingFormat} onSubmit={null}>\n\t\t\t\t<button name=\"cmd\" value=\"/cancelchallenge\" class=\"button\">Cancel</button>\n\t\t\t</TeamForm>\n\t\t</div> : room.challengeMenuOpen ? <div class=\"challenge\">\n\t\t\t<TeamForm onSubmit={this.makeChallenge}>\n\t\t\t\t<button type=\"submit\" class=\"button\"><strong>Challenge</strong></button> {}\n\t\t\t\t<button name=\"cmd\" value=\"/cancelchallenge\" class=\"button\">Cancel</button>\n\t\t\t</TeamForm>\n\t\t</div> : null;\n\n\t\tconst challengeFrom = room.challengedFormat ? <div class=\"challenge\">\n\t\t\t<TeamForm format={room.challengedFormat} onSubmit={this.acceptChallenge}>\n\t\t\t\t<button type=\"submit\" class=\"button\"><strong>Accept</strong></button> {}\n\t\t\t\t<button name=\"cmd\" value=\"/reject\" class=\"button\">Reject</button>\n\t\t\t</TeamForm>\n\t\t</div> : null;\n\n\t\treturn <PSPanelWrapper room={room}>\n\t\t\t<div class=\"tournament-wrapper hasuserlist\"></div>\n\t\t\t<ChatLog class=\"chat-log\" room={this.props.room} onClick={this.focusIfNoSelection} left={tinyLayout ? 0 : 146}>\n\t\t\t\t{challengeTo || challengeFrom && [challengeTo, challengeFrom]}\n\t\t\t</ChatLog>\n\t\t\t<ChatTextEntry room={this.props.room} onMessage={this.send} onKey={this.onKey} left={tinyLayout ? 0 : 146} />\n\t\t\t<ChatUserList room={this.props.room} minimized={tinyLayout} />\n\t\t</PSPanelWrapper>;\n\t}\n}\n\nclass ChatUserList extends preact.Component<{room: ChatRoom, left?: number, minimized?: boolean}> {\n\tsubscription: PSSubscription | null = null;\n\tstate = {\n\t\texpanded: false,\n\t};\n\ttoggleExpanded = () => {\n\t\tthis.setState({expanded: !this.state.expanded});\n\t};\n\tcomponentDidMount() {\n\t\tthis.subscription = this.props.room.subscribe(msg => {\n\t\t\tif (!msg) this.forceUpdate();\n\t\t});\n\t}\n\tcomponentWillUnmount() {\n\t\tif (this.subscription) this.subscription.unsubscribe();\n\t}\n\trender() {\n\t\tconst room = this.props.room;\n\t\tlet userList = Object.entries(room.users) as [ID, string][];\n\t\tPSUtils.sortBy(userList, ([id, name]) => (\n\t\t\t[PS.server.getGroup(name.charAt(0)).order, !name.endsWith('@!'), id]\n\t\t));\n\t\treturn <ul class={'userlist' + (this.props.minimized ? (this.state.expanded ? ' userlist-maximized' : ' userlist-minimized') : '')} style={{left: this.props.left || 0}}>\n\t\t\t<li class=\"userlist-count\" onClick={this.toggleExpanded}><small>{room.userCount} users</small></li>\n\t\t\t{userList.map(([userid, name]) => {\n\t\t\t\tconst groupSymbol = name.charAt(0);\n\t\t\t\tconst group = PS.server.groups[groupSymbol] || {type: 'user', order: 0};\n\t\t\t\tlet color;\n\t\t\t\tif (name.endsWith('@!')) {\n\t\t\t\t\tname = name.slice(0, -2);\n\t\t\t\t\tcolor = '#888888';\n\t\t\t\t} else {\n\t\t\t\t\tcolor = BattleLog.usernameColor(userid);\n\t\t\t\t}\n\t\t\t\treturn <li key={userid}><button class=\"userbutton username\" data-name={name}>\n\t\t\t\t\t<em class={`group${['leadership', 'staff'].includes(group.type!) ? ' staffgroup' : ''}`}>\n\t\t\t\t\t\t{groupSymbol}\n\t\t\t\t\t</em>\n\t\t\t\t\t{group.type === 'leadership' ?\n\t\t\t\t\t\t<strong><em style={{color}}>{name.substr(1)}</em></strong>\n\t\t\t\t\t: group.type === 'staff' ?\n\t\t\t\t\t\t<strong style={{color}}>{name.substr(1)}</strong>\n\t\t\t\t\t:\n\t\t\t\t\t\t<span style={{color}}>{name.substr(1)}</span>\n\t\t\t\t\t}\n\t\t\t\t</button></li>;\n\t\t\t})}\n\t\t</ul>;\n\t}\n}\n\nclass ChatLog extends preact.Component<{\n\tclass: string, room: ChatRoom, onClick?: (e: Event) => void, children?: preact.ComponentChildren,\n\tleft?: number, top?: number, noSubscription?: boolean;\n}> {\n\tlog: BattleLog | null = null;\n\tsubscription: PSSubscription | null = null;\n\tcomponentDidMount() {\n\t\tif (!this.props.noSubscription) {\n\t\t\tthis.log = new BattleLog(this.base! as HTMLDivElement);\n\t\t}\n\t\tthis.subscription = this.props.room.subscribe(tokens => {\n\t\t\tif (!tokens) return;\n\t\t\tswitch (tokens[0]) {\n\t\t\tcase 'users':\n\t\t\t\tconst usernames = tokens[1].split(',');\n\t\t\t\tconst count = parseInt(usernames.shift()!, 10);\n\t\t\t\tthis.props.room.setUsers(count, usernames);\n\t\t\t\treturn;\n\t\t\tcase 'join': case 'j': case 'J':\n\t\t\t\tthis.props.room.addUser(tokens[1]);\n\t\t\t\tbreak;\n\t\t\tcase 'leave': case 'l': case 'L':\n\t\t\t\tthis.props.room.removeUser(tokens[1]);\n\t\t\t\tbreak;\n\t\t\tcase 'name': case 'n': case 'N':\n\t\t\t\tthis.props.room.renameUser(tokens[1], tokens[2]);\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tif (!this.props.noSubscription) this.log!.add(tokens);\n\t\t});\n\t\tthis.setControlsJSX(this.props.children);\n\t}\n\tcomponentWillUnmount() {\n\t\tif (this.subscription) this.subscription.unsubscribe();\n\t}\n\tshouldComponentUpdate(props: typeof ChatLog.prototype.props) {\n\t\tif (props.class !== this.props.class) {\n\t\t\tthis.base!.className = props.class;\n\t\t}\n\t\tif (props.left !== this.props.left) this.base!.style.left = `${props.left || 0}px`;\n\t\tif (props.top !== this.props.top) this.base!.style.top = `${props.top || 0}px`;\n\t\tthis.setControlsJSX(props.children);\n\t\tthis.updateScroll();\n\t\treturn false;\n\t}\n\tsetControlsJSX(jsx: preact.ComponentChildren | undefined) {\n\t\tconst children = this.base!.children;\n\t\tlet controlsElem = children[children.length - 1] as HTMLDivElement | undefined;\n\t\tif (controlsElem && controlsElem.className !== 'controls') controlsElem = undefined;\n\t\tif (!jsx) {\n\t\t\tif (!controlsElem) return;\n\t\t\tpreact.render(null, this.base!, controlsElem);\n\t\t\tthis.updateScroll();\n\t\t\treturn;\n\t\t}\n\t\tif (!controlsElem) {\n\t\t\tcontrolsElem = document.createElement('div');\n\t\t\tcontrolsElem.className = 'controls';\n\t\t\tthis.base!.appendChild(controlsElem);\n\t\t}\n\t\tpreact.render(<div class=\"controls\">{jsx}</div>, this.base!, controlsElem);\n\t\tthis.updateScroll();\n\t}\n\tupdateScroll() {\n\t\tif (this.log) {\n\t\t\tthis.log.updateScroll();\n\t\t} else if (this.props.room.battle) {\n\t\t\tthis.log = (this.props.room.battle as Battle).scene.log;\n\t\t\tthis.log.updateScroll();\n\t\t}\n\t}\n\trender() {\n\t\treturn <div class={this.props.class} role=\"log\" onClick={this.props.onClick} style={{\n\t\t\tleft: this.props.left || 0, top: this.props.top || 0,\n\t\t}}></div>;\n\t}\n}\n\nPS.roomTypes['chat'] = {\n\tModel: ChatRoom,\n\tComponent: ChatPanel,\n};\nPS.updateRoomTypes();\n"],"mappings":"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"}