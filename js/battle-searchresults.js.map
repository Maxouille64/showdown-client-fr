{"version":3,"file":"battle-searchresults.js","names":["PSSearchResults","URL_ROOT","Config","routes","dex","renderPokemonSortRow","search","props","sortCol","firstPokemonColumn","renderMoveSortRow","renderPokemonRow","id","matchStart","matchEnd","errorMessage","pokemon","species","get","tagStart","forme","name","length","stats","baseStats","bst","Object","values","stat","gen","getTier","Dex","getPokemonIcon","renderName","types","map","type","resourcePrefix","abilities","unreleasedHidden","hp","atk","def","spa","spd","spe","slice","output","push","renderItemRow","item","items","getItemIcon","shortDesc","renderAbilityRow","ability","renderMoveRow","move","moves","startsWith","pp","noPPBoosts","Math","min","category","basePower","accuracy","renderTypeRow","charAt","toUpperCase","renderCategoryRow","renderArticleRow","isSearchType","window","BattleArticleTitles","substr","renderEggGroupRow","renderTierRow","tierTable","uber","caplc","capnfe","renderRow","row","label","filterLabel","illegalLabel","sanitizedHTML","replace","__html","render","filters","query","results","result","preact","Component"],"sources":["../src/battle-searchresults.tsx"],"sourcesContent":["/**\n * Search Results\n *\n * Code for displaying sesrch results from battle-dex-search.ts\n *\n * @author Guangcong Luo <guangcongluo@gmail.com>\n * @license AGPLv3\n */\n\nclass PSSearchResults extends preact.Component<{search: DexSearch}> {\n\treadonly URL_ROOT = `//${Config.routes.dex}/`;\n\n\trenderPokemonSortRow() {\n\t\tconst search = this.props.search;\n\t\tconst sortCol = search.sortCol;\n\t\treturn <li class=\"result\"><div class=\"sortrow\">\n\t\t\t<button class={`sortcol numsortcol${!sortCol ? ' cur' : ''}`}>{!sortCol ? 'Sort: ' : search.firstPokemonColumn}</button>\n\t\t\t<button class={`sortcol pnamesortcol${sortCol === 'name' ? ' cur' : ''}`} data-sort=\"name\">Name</button>\n\t\t\t<button class={`sortcol typesortcol${sortCol === 'type' ? ' cur' : ''}`} data-sort=\"type\">Types</button>\n\t\t\t<button class={`sortcol abilitysortcol${sortCol === 'ability' ? ' cur' : ''}`} data-sort=\"ability\">Abilities</button>\n\t\t\t<button class={`sortcol statsortcol${sortCol === 'hp' ? ' cur' : ''}`} data-sort=\"hp\">HP</button>\n\t\t\t<button class={`sortcol statsortcol${sortCol === 'atk' ? ' cur' : ''}`} data-sort=\"atk\">Atk</button>\n\t\t\t<button class={`sortcol statsortcol${sortCol === 'def' ? ' cur' : ''}`} data-sort=\"def\">Def</button>\n\t\t\t<button class={`sortcol statsortcol${sortCol === 'spa' ? ' cur' : ''}`} data-sort=\"spa\">SpA</button>\n\t\t\t<button class={`sortcol statsortcol${sortCol === 'spd' ? ' cur' : ''}`} data-sort=\"spd\">SpD</button>\n\t\t\t<button class={`sortcol statsortcol${sortCol === 'spe' ? ' cur' : ''}`} data-sort=\"spe\">Spe</button>\n\t\t\t<button class={`sortcol statsortcol${sortCol === 'bst' ? ' cur' : ''}`} data-sort=\"bst\">BST</button>\n\t\t</div></li>;\n\t}\n\n\trenderMoveSortRow() {\n\t\tconst sortCol = this.props.search.sortCol;\n\t\treturn <li class=\"result\"><div class=\"sortrow\">\n\t\t\t<button class={`sortcol movenamesortcol${sortCol === 'name' ? ' cur' : ''}`} data-sort=\"name\">Name</button>\n\t\t\t<button class={`sortcol movetypesortcol${sortCol === 'type' ? ' cur' : ''}`} data-sort=\"type\">Type</button>\n\t\t\t<button class={`sortcol movetypesortcol${sortCol === 'category' ? ' cur' : ''}`} data-sort=\"category\">Cat</button>\n\t\t\t<button class={`sortcol powersortcol${sortCol === 'power' ? ' cur' : ''}`} data-sort=\"power\">Pow</button>\n\t\t\t<button class={`sortcol accuracysortcol${sortCol === 'accuracy' ? ' cur' : ''}`} data-sort=\"accuracy\">Acc</button>\n\t\t\t<button class={`sortcol ppsortcol${sortCol === 'pp' ? ' cur' : ''}`} data-sort=\"pp\">PP</button>\n\t\t</div></li>;\n\t}\n\n\trenderPokemonRow(id: ID, matchStart: number, matchEnd: number, errorMessage?: preact.ComponentChildren) {\n\t\tconst search = this.props.search;\n\t\tconst pokemon = search.dex.species.get(id);\n\t\tif (!pokemon) return <li class=\"result\">Unrecognized pokemon</li>;\n\n\t\tlet tagStart = (pokemon.forme ? pokemon.name.length - pokemon.forme.length - 1 : 0);\n\n\t\tconst stats = pokemon.baseStats;\n\t\tlet bst = 0;\n\t\tfor (const stat of Object.values(stats)) bst += stat;\n\t\tif (search.dex.gen < 2) bst -= stats['spd'];\n\n\t\tif (errorMessage) {\n\t\t\treturn <li class=\"result\"><a href={`${this.URL_ROOT}pokemon/${id}`} data-target=\"push\" data-entry={`pokemon|${pokemon.name}`}>\n\t\t\t\t<span class=\"col numcol\">{search.getTier(pokemon)}</span>\n\n\t\t\t\t<span class=\"col iconcol\">\n\t\t\t\t\t<span style={Dex.getPokemonIcon(pokemon.id)}></span>\n\t\t\t\t</span>\n\n\t\t\t\t<span class=\"col pokemonnamecol\">{this.renderName(pokemon.name, matchStart, matchEnd, tagStart)}</span>\n\n\t\t\t\t{errorMessage}\n\t\t\t</a></li>;\n\t\t}\n\n\t\treturn <li class=\"result\"><a href={`${this.URL_ROOT}pokemon/${id}`} data-target=\"push\" data-entry={`pokemon|${pokemon.name}`}>\n\t\t\t<span class=\"col numcol\">{search.getTier(pokemon)}</span>\n\n\t\t\t<span class=\"col iconcol\">\n\t\t\t\t<span style={Dex.getPokemonIcon(pokemon.id)}></span>\n\t\t\t</span>\n\n\t\t\t<span class=\"col pokemonnamecol\">{this.renderName(pokemon.name, matchStart, matchEnd, tagStart)}</span>\n\n\t\t\t<span class=\"col typecol\">\n\t\t\t\t{pokemon.types.map(type =>\n\t\t\t\t\t<img src={`${Dex.resourcePrefix}sprites/types/${type}.png`} alt={type} height=\"14\" width=\"32\" class=\"pixelated\" />\n\t\t\t\t)}\n\t\t\t</span>\n\n\t\t\t{search.dex.gen >= 3 && (pokemon.abilities['1'] ?\n\t\t\t\t<span class=\"col twoabilitycol\">{pokemon.abilities['0']}<br />{pokemon.abilities['1']}</span>\n\t\t\t:\n\t\t\t\t<span class=\"col abilitycol\">{pokemon.abilities['0']}</span>\n\t\t\t)}\n\t\t\t{search.dex.gen >= 5 && (pokemon.abilities['S'] ?\n\t\t\t\t<span class={`col twoabilitycol${pokemon.unreleasedHidden ? ' unreleasedhacol' : ''}`}>{pokemon.abilities['H'] || ''}<br />{pokemon.abilities['S']}</span>\n\t\t\t: pokemon.abilities['H'] ?\n\t\t\t\t<span class={`col abilitycol${pokemon.unreleasedHidden ? ' unreleasedhacol' : ''}`}>{pokemon.abilities['H']}</span>\n\t\t\t:\n\t\t\t\t<span class=\"col abilitycol\"></span>\n\t\t\t)}\n\n\t\t\t<span class=\"col statcol\"><em>HP</em><br />{stats.hp}</span>\n\t\t\t<span class=\"col statcol\"><em>Atk</em><br />{stats.atk}</span>\n\t\t\t<span class=\"col statcol\"><em>Def</em><br />{stats.def}</span>\n\t\t\t{search.dex.gen > 2 && <span class=\"col statcol\"><em>SpA</em><br />{stats.spa}</span>}\n\t\t\t{search.dex.gen > 2 && <span class=\"col statcol\"><em>SpD</em><br />{stats.spd}</span>}\n\t\t\t{search.dex.gen < 2 && <span class=\"col statcol\"><em>Spc</em><br />{stats.spa}</span>}\n\t\t\t<span class=\"col statcol\"><em>Spe</em><br />{stats.spe}</span>\n\t\t\t<span class=\"col bstcol\"><em>BST<br />{bst}</em></span>\n\t\t</a></li>;\n\t}\n\n\trenderName(name: string, matchStart: number, matchEnd: number, tagStart?: number) {\n\t\tif (!matchEnd) {\n\t\t\tif (!tagStart) return name;\n\t\t\treturn [\n\t\t\t\tname.slice(0, tagStart), <small>{name.slice(tagStart)}</small>,\n\t\t\t];\n\t\t}\n\n\t\tlet output: preact.ComponentChild[];\n\t\tif (tagStart && matchStart >= tagStart) {\n\t\t\toutput = [name];\n\t\t} else {\n\t\t\toutput = [\n\t\t\t\tname.slice(0, matchStart),\n\t\t\t\t<b>{name.slice(matchStart, matchEnd)}</b>,\n\t\t\t\tname.slice(matchEnd, tagStart || name.length),\n\t\t\t];\n\t\t\tif (!tagStart) return output;\n\t\t}\n\n\t\tif (matchEnd && matchEnd > tagStart) {\n\t\t\tif (matchStart < tagStart) {\n\t\t\t\tmatchStart = tagStart;\n\t\t\t}\n\t\t\toutput.push(\n\t\t\t\t<small>{name.slice(tagStart, matchStart)}<b>{name.slice(matchStart, matchEnd)}</b>{name.slice(matchEnd)}</small>\n\t\t\t);\n\t\t} else {\n\t\t\toutput.push(<small>{name.slice(tagStart)}</small>);\n\t\t}\n\n\t\treturn output;\n\t}\n\n\trenderItemRow(id: ID, matchStart: number, matchEnd: number, errorMessage?: preact.ComponentChildren) {\n\t\tconst search = this.props.search;\n\t\tconst item = search.dex.items.get(id);\n\t\tif (!item) return <li class=\"result\">Unrecognized item</li>;\n\n\t\treturn <li class=\"result\"><a href={`${this.URL_ROOT}items/${id}`} data-target=\"push\" data-entry={`item|${item.name}`}>\n\t\t\t<span class=\"col itemiconcol\">\n\t\t\t\t<span style={Dex.getItemIcon(item)}></span>\n\t\t\t</span>\n\n\t\t\t<span class=\"col namecol\">{this.renderName(item.name, matchStart, matchEnd)}</span>\n\n\t\t\t{errorMessage}\n\n\t\t\t{!errorMessage && <span class=\"col itemdesccol\">{item.shortDesc}</span>}\n\t\t</a></li>;\n\t}\n\n\trenderAbilityRow(id: ID, matchStart: number, matchEnd: number, errorMessage?: preact.ComponentChildren) {\n\t\tconst search = this.props.search;\n\t\tconst ability = search.dex.abilities.get(id);\n\t\tif (!ability) return <li class=\"result\">Unrecognized ability</li>;\n\n\t\treturn <li class=\"result\"><a href={`${this.URL_ROOT}abilitys/${id}`} data-target=\"push\" data-entry={`ability|${ability.name}`}>\n\t\t\t<span class=\"col namecol\">{this.renderName(ability.name, matchStart, matchEnd)}</span>\n\n\t\t\t{errorMessage}\n\n\t\t\t{!errorMessage && <span class=\"col abilitydesccol\">{ability.shortDesc}</span>}\n\t\t</a></li>;\n\t}\n\n\trenderMoveRow(id: ID, matchStart: number, matchEnd: number, errorMessage?: preact.ComponentChildren) {\n\t\tconst search = this.props.search;\n\t\tconst move = search.dex.moves.get(id);\n\t\tif (!move) return <li class=\"result\">Unrecognized move</li>;\n\n\t\tconst tagStart = (move.name.startsWith('Hidden Power') ? 12 : 0);\n\n\t\tif (errorMessage) {\n\t\t\treturn <li class=\"result\"><a href={`${this.URL_ROOT}move/${id}`} data-target=\"push\" data-entry={`move|${move.name}`}>\n\t\t\t\t<span class=\"col movenamecol\">{this.renderName(move.name, matchStart, matchEnd, tagStart)}</span>\n\n\t\t\t\t{errorMessage}\n\t\t\t</a></li>;\n\t\t}\n\n\t\tlet pp = (move.pp === 1 || move.noPPBoosts ? move.pp : move.pp * 8 / 5);\n\t\tif (search.dex.gen < 3) pp = Math.min(61, pp);\n\t\treturn <li class=\"result\"><a href={`${this.URL_ROOT}move/${id}`} data-target=\"push\" data-entry={`move|${move.name}`}>\n\t\t\t<span class=\"col movenamecol\">{this.renderName(move.name, matchStart, matchEnd, tagStart)}</span>\n\n\t\t\t<span class=\"col typecol\">\n\t\t\t\t<img src={`${Dex.resourcePrefix}sprites/types/${move.type}.png`} alt={move.type} height=\"14\" width=\"32\" class=\"pixelated\" />\n\t\t\t\t<img src={`${Dex.resourcePrefix}sprites/categories/${move.category}.png`} alt={move.category} height=\"14\" width=\"32\" class=\"pixelated\" />\n\t\t\t</span>\n\n\t\t\t<span class=\"col labelcol\">\n\t\t\t\t{move.category !== 'Status' ? [<em>Power</em>, <br />, `${move.basePower}` || '\\u2014'] : ''}\n\t\t\t</span>\n\t\t\t<span class=\"col widelabelcol\">\n\t\t\t\t<em>Accuracy</em><br />{move.accuracy && move.accuracy !== true ? `${move.accuracy}%` : '\\u2014'}\n\t\t\t</span>\n\t\t\t<span class=\"col pplabelcol\">\n\t\t\t\t<em>PP</em><br />{pp}\n\t\t\t</span>\n\n\t\t\t<span class=\"col movedesccol\">{move.shortDesc}</span>\n\n\t\t</a></li>;\n\t}\n\n\trenderTypeRow(id: ID, matchStart: number, matchEnd: number, errorMessage?: preact.ComponentChildren) {\n\t\tconst search = this.props.search;\n\t\tconst name = id.charAt(0).toUpperCase() + id.slice(1);\n\n\t\treturn <li class=\"result\"><a href={`${this.URL_ROOT}types/${id}`} data-target=\"push\" data-entry={`type|${name}`}>\n\t\t\t<span class=\"col namecol\">{this.renderName(name, matchStart, matchEnd)}</span>\n\n\t\t\t<span class=\"col typecol\">\n\t\t\t\t<img src={`${Dex.resourcePrefix}sprites/types/${name}.png`} alt={name} height=\"14\" width=\"32\" class=\"pixelated\" />\n\t\t\t</span>\n\n\t\t\t{errorMessage}\n\t\t</a></li>;\n\t}\n\n\trenderCategoryRow(id: ID, matchStart: number, matchEnd: number, errorMessage?: preact.ComponentChildren) {\n\t\tconst search = this.props.search;\n\t\tconst name = id.charAt(0).toUpperCase() + id.slice(1);\n\n\t\treturn <li class=\"result\"><a href={`${this.URL_ROOT}categories/${id}`} data-target=\"push\" data-entry={`category|${name}`}>\n\t\t\t<span class=\"col namecol\">{this.renderName(name, matchStart, matchEnd)}</span>\n\n\t\t\t<span class=\"col typecol\">\n\t\t\t\t<img src={`${Dex.resourcePrefix}sprites/categories/${name}.png`} alt={name} height=\"14\" width=\"32\" class=\"pixelated\" />\n\t\t\t</span>\n\n\t\t\t{errorMessage}\n\t\t</a></li>;\n\t}\n\n\trenderArticleRow(id: ID, matchStart: number, matchEnd: number, errorMessage?: preact.ComponentChildren) {\n\t\tconst search = this.props.search;\n\t\tconst isSearchType = (id === 'pokemon' || id === 'moves');\n\t\tconst name = (window.BattleArticleTitles && window.BattleArticleTitles[id]) ||\n\t\t\t(id.charAt(0).toUpperCase() + id.substr(1));\n\n\t\treturn <li class=\"result\"><a href={`${this.URL_ROOT}articles/${id}`} data-target=\"push\" data-entry={`article|${name}`}>\n\t\t\t<span class=\"col namecol\">{this.renderName(name, matchStart, matchEnd)}</span>\n\n\t\t\t<span class=\"col movedesccol\">{isSearchType ? \"(search type)\" : \"(article)\"}</span>\n\n\t\t\t{errorMessage}\n\t\t</a></li>;\n\t}\n\n\trenderEggGroupRow(id: ID, matchStart: number, matchEnd: number, errorMessage?: preact.ComponentChildren) {\n\t\tconst search = this.props.search;\n\t\t// very hardcode\n\t\tlet name: string | undefined;\n\t\tif (id === 'humanlike') name = 'Human-Like';\n\t\telse if (id === 'water1') name = 'Water 1';\n\t\telse if (id === 'water2') name = 'Water 2';\n\t\telse if (id === 'water3') name = 'Water 3';\n\t\tif (name) {\n\t\t\tif (matchEnd > 5) matchEnd++;\n\t\t} else {\n\t\t\tname = id.charAt(0).toUpperCase() + id.slice(1);\n\t\t}\n\n\t\treturn <li class=\"result\"><a href={`${this.URL_ROOT}egggroups/${id}`} data-target=\"push\" data-entry={`egggroup|${name}`}>\n\t\t\t<span class=\"col namecol\">{this.renderName(name, matchStart, matchEnd)}</span>\n\n\t\t\t<span class=\"col movedesccol\">(egg group)</span>\n\n\t\t\t{errorMessage}\n\t\t</a></li>;\n\t}\n\n\trenderTierRow(id: ID, matchStart: number, matchEnd: number, errorMessage?: preact.ComponentChildren) {\n\t\tconst search = this.props.search;\n\t\t// very hardcode\n\t\tconst tierTable: {[id: string]: string} = {\n\t\t\tuber: \"Uber\",\n\t\t\tcaplc: \"CAP LC\",\n\t\t\tcapnfe: \"CAP NFE\",\n\t\t};\n\t\tconst name = tierTable[id] || id.toUpperCase();\n\n\t\treturn <li class=\"result\"><a href={`${this.URL_ROOT}tiers/${id}`} data-target=\"push\" data-entry={`tier|${name}`}>\n\t\t\t<span class=\"col namecol\">{this.renderName(name, matchStart, matchEnd)}</span>\n\n\t\t\t<span class=\"col movedesccol\">(tier)</span>\n\n\t\t\t{errorMessage}\n\t\t</a></li>;\n\t}\n\n\trenderRow(row: SearchRow) {\n\t\tconst search = this.props.search;\n\t\tconst [type, id] = row;\n\t\tlet matchStart = 0;\n\t\tlet matchEnd = 0;\n\t\tif (row.length > 3) {\n\t\t\tmatchStart = row[2]!;\n\t\t\tmatchEnd = row[3]!;\n\t\t}\n\n\t\tlet errorMessage: preact.ComponentChild = null;\n\t\tlet label;\n\t\tif ((label = search.filterLabel(type))) { // tslint:disable-line\n\t\t\terrorMessage = <span class=\"col filtercol\"><em>{label}</em></span>;\n\t\t} else if ((label = search.illegalLabel(id as ID))) { // tslint:disable-line\n\t\t\terrorMessage = <span class=\"col illegalcol\"><em>{label}</em></span>;\n\t\t}\n\n\t\tswitch (type) {\n\t\tcase 'html':\n\t\t\tconst sanitizedHTML = id.replace(/</g, '&lt;')\n\t\t\t\t.replace(/&lt;em>/g, '<em>').replace(/&lt;\\/em>/g, '</em>')\n\t\t\t\t.replace(/&lt;strong>/g, '<strong>').replace(/&lt;\\/strong>/g, '</strong>');\n\t\t\treturn <li class=\"result\">\n\t\t\t\t<p dangerouslySetInnerHTML={{__html: sanitizedHTML}}></p>\n\t\t\t</li>;\n\t\tcase 'header':\n\t\t\treturn <li class=\"result\"><h3>{id}</h3></li>;\n\t\tcase 'sortpokemon':\n\t\t\treturn this.renderPokemonSortRow();\n\t\tcase 'sortmove':\n\t\t\treturn this.renderMoveSortRow();\n\t\tcase 'pokemon':\n\t\t\treturn this.renderPokemonRow(id as ID, matchStart, matchEnd, errorMessage);\n\t\tcase 'move':\n\t\t\treturn this.renderMoveRow(id as ID, matchStart, matchEnd, errorMessage);\n\t\tcase 'item':\n\t\t\treturn this.renderItemRow(id as ID, matchStart, matchEnd, errorMessage);\n\t\tcase 'ability':\n\t\t\treturn this.renderAbilityRow(id as ID, matchStart, matchEnd, errorMessage);\n\t\tcase 'type':\n\t\t\treturn this.renderTypeRow(id as ID, matchStart, matchEnd, errorMessage);\n\t\tcase 'egggroup':\n\t\t\treturn this.renderEggGroupRow(id as ID, matchStart, matchEnd, errorMessage);\n\t\t\tcase 'tier':\n\t\t\treturn this.renderTierRow(id as ID, matchStart, matchEnd, errorMessage);\n\t\tcase 'category':\n\t\t\treturn this.renderCategoryRow(id as ID, matchStart, matchEnd, errorMessage);\n\t\tcase 'article':\n\t\t\treturn this.renderArticleRow(id as ID, matchStart, matchEnd, errorMessage);\n\t\t}\n\t\treturn <li>Error: not found</li>;\n\t}\n\n\trender() {\n\t\tconst search = this.props.search;\n\t\treturn <ul class=\"dexlist\">\n\t\t\t{search.filters && <p>\n\t\t\t\tFilters: {}\n\t\t\t\t{search.filters.map(([type, name]) =>\n\t\t\t\t\t<button class=\"filter\" value={`${type}:${name}`}>\n\t\t\t\t\t\t${name} <i class=\"fa fa-times-circle\"></i>\n\t\t\t\t\t</button>\n\t\t\t\t)}\n\t\t\t\t{!search.query && <small style=\"color: #888\">(backspace = delete filter)</small>}\n\t\t\t</p>}\n\t\t\t{search.results &&\n\t\t\t// TODO: implement windowing\n\t\t\t// for now, just show first twenty results\n\t\t\tsearch.results.slice(0, 20).map(result =>\n\t\t\t\tthis.renderRow(result)\n\t\t\t)}\n\t\t</ul>;\n\t}\n}\n"],"mappings":"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"}